# 计算机网络概述

## 计算机网络的组成

### 组成部分

- 硬件
- 软件
- 协议

### 工作方式

- 边缘部分
  - `C/S`客户端-客户服务器方式
  - `P2P`客户端-客户端方式
- 核心部分
  - 为边缘部分服务

### 功能组成

- 通信子网：实现数据通信，`OSI`七层模型中的**网络层、数据链路层、物理层**，对应的是各种传输介质、通信设备、相应的网络协议（路由器、交换机、网桥、集线器、中继器）。
- 资源子网：实现资源共享/数据处理，`OSI`七层模型中**应用层、表示层、会话层**，对应的是实现**资源共享功能的设备和软件的集合**。

## 计算机网络的分类

### 按作用范围

- 广域网(`WAN - Wide Area Network`) 交换技术
- 城域网(`MAN - Metro Area Network`)
- 局域网(`LAN - Local Area Network`) 广播技术
- 个人区域网(`PAN - Personal Area Network`)

### 按使用者

- 公用网络
- 专用网络

### 按交换技术

- 电路交换
- 报文交换
- 分组交换

![img](https://github.com/NoAlligator/pico/blob/main/img/v2-c265127be7ffecc45f135140f83d7a77_r.jpg?raw=true)

### 按拓扑结构

- 总线型
- 星型
- 环形
- 网状型（常用于广域网）

![image-20220102232417391](https://github.com/NoAlligator/pico/blob/main/img/image-20220102232417391.png?raw=true)

### 按传输技术

- **广播式**网络 - 共享**公共通信信道**
- **点对点**网络 - 使用**分组存储转发**和**路由存储**机制

## 网络速率相关性能指标

### 速率（`Network rate`）

定义：

连接在计算机网络上的主机在**数字信道上传输数据位数的速率**。

单位：

- 以**比特**计算`b/s(bps)`，`Kb/s(kbps)`，`Mb/s(mbps)`，`Tb/s`
- 以**字节**计算`B/s`，`KB/s`，`MB/s`，`TB/s`
- 换算公式：`8(K|M|T)b/s = 1(K|M|T)B/s`

### 带宽（`Bandwidth`）

在计算机网络中，指的是网络设备所支持的**最高速度**，单位同速率，是**理想条件下最高速率**

### 吞吐量（`Throughout`）

指的是**单位时间**内通过某个网络**数据总量**

## 时延相关指标 （`Time delay`）

### 时延种类

| 名称         | 描述                                 | 计算公式                            |
| ------------ | ------------------------------------ | ----------------------------------- |
| **发送时延** | 数据从主机到信道上所用的时间         | 发送的数据长度 ÷ 发送速率(信道带宽) |
| 传播时延     | 数据在信道上传播所花费的时间         | 信道长度 ÷ 电磁波在信道上传播的速率 |
| 排队时延     | 数据在路由器前等待前面数据处理的时间 | 无计算方式                          |
| 处理时延     | 数据在路由器中处理需求的时间         | 无计算方式                          |

### 时延带宽积

英文：`Delay bandwidth product`

公式：时延带宽积 = 传播时延 x 带宽 

### 往返时延`RTT`（Round-Trip Time）

定义：

`RTT`为数据完全发送完（完成最后一个比特推送到数据链路上）到收到确认信号的时间。

`RTT`的大小与发送数据大小的关系：`RTT`越大，在**收到确认之前，可以发送的数据越多**。



`RTT`包括：

1. 往返传播时延（传播时延 x 2）
2. 末端处理时间

利用率：

- 信道利用率 = 信道有数据通过的时间 / (有 + 无 数据通过的时间)
- 网络利用率 = 信道利用率加权平均值

### 时延和利用率的关系

利用率越高，时延越大。

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227114808451.png" alt="image-20211227114808451" style="zoom:50%;" />

## 分层结构

### 为什么要分层？分层要做什么？

1. 发起通信的计算机必须将数据通信的**通路进行激活**。
2. 要告诉网络**如何识别目的主机**。
3. 发起通信的计算机要查明目的主机**是否开机**，并且与网络连接正常。
4. 发起通信的计算机要弄清楚，对方计算机中文件管理程序**是否已经做好准备工作**。
5. 确保**差错和意外**可以解决。

### 正确认识分层结构

**SDU** (`Service Data Unit`) : 服务数据单元

**PCI** ( `Protocol Control Information`) : 协议控制信息

**PDU** ( `Protocol Data Unit`) : 协议数据单元

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227120012508.png" alt="image-20211227120012508"  />

### 参考模型

#### 参考模型分类：

- `7`层`OSI`参考模型：**法定标准**
- `5`层体系结构：在`7`层`OSI`参考模型的基础上形成。
- `4`层`TCP/IP`参考模型：**事实标准**

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227205441225.png" alt="image-20211227205441225" style="zoom:50%;" />

#### `OSI`七层参考模型层次：

- **应用层**
- **表示层**
- **会话层**
- 传输层
- **网络层**
- **数据链路层**
- **物理层**

#### `OSI`七层参考模型详解：

| `OSI`层次  | 英文               | 概述                                                         | 作用                                                         |
| :--------- | ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 应用层     | Application Layer  | **直接**为用户的**应用进程**（例如电子邮件、文件传输和终端仿真）**提供服务**。 | 典型的例子：如`HTTP`、`SMTP`、`FTP`、`DNS`等。               |
| 表示层     | Presentation Layer | 用于**处理**在两个通信系统中**交换信息的表示方式**（语法和语义） | 1.数据格式变换。2.数据加密解密。3.数据压缩和恢复。           |
| 会话层     | Session Layer      | 向表示层实体/用户进程提供**建立连接**并在连接上有序地传输数据，这是**会话**，也是**建立同步（SYN）**。 | 1.建立、管理、终止会话。2.使用校验点可使会话在通信失效时从校验点/同步点继续回复通信，实现数据同步（适用于传输大文件）。 |
| 传输层     | Transport Layer    | 负责主机中两个进程的通信，即**端到端**通讯。传输单位是**报文段或用户数据报**。 | 1.可靠传输、不可靠传输 。2.流量控制。3.复用分用。            |
| 网络层     | Network Layer      | 主要任务是把分组从**源端**传到**目的端**，为分组交换网上的不同主机提供通信服务，网络层传输单位是**数据报**。 | 1.路由选择（最佳路径）。2.流量控制。3.差错控制。4.拥塞控制。 |
| 数据链路层 | Data Layer         | 主要任务是把网络层传下来的**数据报组装成帧**。数据链路层/链路层的传输单位是帧。 | 1.成帧（定义帧的开始和结束）2.差错控制（纠错由传输层解决）。3.流量控制。4.访问（接入）控制。 |
| 物理层     | Physical Layer     | 主要任务是在物理媒体上**实现比特流的透明传输**（透明传输指不管所传数据是什么样的比特组合，都应当能够在链路上传送），物理层传输单位是比特。 | 1.定义接口特性。2.定义传输模式（单工、半双工、双工）。3.定义传输速率。4.比特同步。5.比特编码。 |

#### ISO/OSI参考模型通信过程

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227142740979.png" alt="image-20211227142740979" style="zoom:50%;" />

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227142841962.png" alt="image-20211227142841962" style="zoom:50%;" />

#### `TCP/IP`和`OSI`协议的异同点：

相同点：1.都是**分层结构**。2.都基于**独立的协议栈**的概念。3.都可以实现**异构网络互联**。

不同点：

1. `OSI`定义三点：**服务、协议、接口**。
2. `OSI`先出现，参考模型**先于协议发明，不偏向特定的协议**。
3. `TCP/IP`设计之初就考虑到**异构网互联**的问题，将`IP`作为**重要层次**。
4. 其他区别如下：

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227210842054.png" alt="image-20211227210842054" style="zoom:50%;" />

#### 五层参考模型

综合了`OSI`和`TCP/IP`的优点

![image-20211227211000473](https://github.com/NoAlligator/pico/blob/main/img/image-20211227211000473.png?raw=true)

<img src="https://github.com/NoAlligator/pico/blob/main/img/image-20211227211118609.png" alt="image-20211227211118609" style="zoom:50%;" />
